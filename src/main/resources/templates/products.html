<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">

<head>
    <div th:replace="allPagesTemplates :: all_pages_head_data"></div>
    <link rel="stylesheet" th:href="@{/csssource/item_list_stylesheet.css}">
    <script th:src="@{/jssource/item_list_js.js}"></script>
</head>

<body>
<div th:replace="allPagesTemplates :: navBar"></div>

</div>

    <div class="table-wrapper">
        <div class="table-title">
            <div class="row">
                <div class="col-sm-4">
                    <h2>Co2 <b>Товары</b></h2>
                </div>
                <div class="col-sm-8">
                    <a href="/editOrder" class="btn btn-add"><i class="material-icons">&#xe147;</i>
                        <span>Добавить</span></a>
                    <a th:href="@{${#httpServletRequest.requestURI}}" class="btn btn-primary"><i class="material-icons">&#xE863;</i>
                        <span>Обновить</span></a>
                    <a href="#" class="btn btn-info"><i class="material-icons">&#xE24D;</i>
                        <span>Excel Импорт </span></a>
                </div>
            </div>
        </div>
        <div class="table-filter">
            <div class="row">
                <div class="col-sm-3">
                    <div class="show-entries">
                        <span>Кол-во</span>
                        <select id="selectPageSize" class="form-control" onchange="location = this.value;">
                            <option th:value="${#httpServletRequest.requestURI} + '?productsPageSize=5'"
                                    th:selected="${productListPageHelper.getPageSize() == 5}">5
                            </option>
                            <option th:value="${#httpServletRequest.requestURI} + '?productsPageSize=10'"
                                    th:selected="${productListPageHelper.getPageSize() == 10}">10
                            </option>
                            <option th:value="${#httpServletRequest.requestURI} + '?productsPageSize=15'"
                                    th:selected="${productListPageHelper.getPageSize() == 15}">15
                            </option>
                            <option th:value="${#httpServletRequest.requestURI} + '?productsPageSize=20'"
                                    th:selected="${productListPageHelper.getPageSize() == 20}">20
                            </option>
                        </select>
                        <span>страниц</span>
                    </div>
                </div>
                <div class="col-sm-9">
                    <form th:action="@{/admin/products}" method="get" role="form" autocomplete="off">
                        <button type="submit" class="btn btn-primary" ><i class="fa fa-search"></i>
                        </button>
                        <div class="filter-group">
                            <label>Имя</label>
                            <input th:value="${productListPageHelper.getProductListSearchParam()}" type="text" name="searchParam" class="form-control" id="searchParam">
                        </div>
                    </form>

                        <div class="filter-group">
                            <label>Категория</label>
                            <select id="selectProductsCategory" class="form-control" onchange="location = this.value;" >
                                <option
                                        th:value="${#httpServletRequest.requestURI} + '?productsCategorySorting=0'"
                                        th:selected="${productListPageHelper.getProductsCategorySorting().getId() == 0}">Все
                                </option>
                                <option th:each="productCategory : ${productCategories}"
                                        th:value="${#httpServletRequest.requestURI} + '?productsCategorySorting=' + ${productCategory.getId()}"
                                        th:selected="${productListPageHelper.getProductsCategorySorting().getId() == productCategory.getId() }"
                                th:text="${productCategory.getName()}">
                                </option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label>Склад</label>
                            <select id="selectProductStockSorting" class="form-control"
                                    onchange="location = this.value;">
                                <option th:value="${#httpServletRequest.requestURI} + '?productsStockSorting=1'"
                                        th:selected="${productListPageHelper.getProductsStockSorting() == null}">Все
                                </option>
                                <option th:value="${#httpServletRequest.requestURI} + '?productsStockSorting=2'"
                                        th:selected="${productListPageHelper.getProductsStockSorting() == T(com.example.co2Automatic.models.ProductStock).CO2_STOCK}">
                                    Co2
                                </option>
                                <option th:value="${#httpServletRequest.requestURI} + '?productsStockSorting=3'"
                                        th:selected="${productListPageHelper.getProductsStockSorting() == T(com.example.co2Automatic.models.ProductStock).B_STOCK}">
                                    Барабан
                                </option>
                            </select>
                        </div>
                        <span class="filter-icon"><i class="fa fa-filter"></i></span>
                </div>
            </div>
        </div>
        <table class="table table-striped table-hover" id="orderListTable">
            <thead>
            <tr>
                <th>ID</th>
                <th>Товар</th>
                <th>Кол-во</th>
                <th>Дата обнов.</th>
                <th>Цена</th>
                <th>Опт. Цена</th>
                <th>Детально</th>
                <th>Удалить</th>
            </tr>
            </thead>
            <tbody th:each="product : ${productList}">
            <tr>
                <td th:text="${product.getId()}"></td>
                <td><img th:src="@{${product.getImageUrls().iterator().next()}}" width="70" height="70" class="avatar" alt="Avatar"><br><a
                        th:href="@{'/admin/products/editProduct' + '?id=' + ${product.getId()}}" th:text="${product.getName()}"></a></td>
                <td th:text="${product.getQuantity()}">-</td>
                <td th:text="${#dates.format(product.getLastUpdatingDate(), 'yyyy-MM-dd')}"></td>
                <td th:text="${product.getPrice() + ' ' + product.getCurrency().getCurrencySymbol()}">-</td>
                <td th:text="${product.getWholeSalePrice() + ' ' + product.getCurrency().getCurrencySymbol()}">-</td>
                <td><a th:href="@{'/admin/products/editProduct' + '?id=' + ${product.getId()}}" class="view" title="View Details" data-toggle="tooltip"><i class="material-icons">&#xE5C8;</i></a>
                </td>
                <td><a href="#" class="delete" title="Delete Order" data-toggle="tooltip"><i class="material-icons">&#xe5cd;</i></a>
                </td>
            </tr>

            </tbody>
        </table>
        <div class="clearfix">
            <div class="hint-text">Показано <b>5</b> из <b>25</b> заказов</div>
            <ul class="pagination">
                <li class="page-item"><a
                        th:href="@{${#httpServletRequest.requestURI}(productsPageNumber = '0')}"
                        class="page-link"> << </a></li>
                <li class="page-item"><a
                        th:href="@{${#httpServletRequest.requestURI}(productsPageNumber=${productListPageHelper.getCurrentPageNumber() - 1})}"
                        th:if="${productListPageHelper.getCurrentPageNumber() > 0}"
                        class="page-link"> < </a></li>
                <li class="page-item active"><a class="page-link"
                                                th:text="${productListPageHelper.getCurrentPageNumber()}"></a></li>
                <li class="page-item"><a
                        th:href="@{${#httpServletRequest.requestURI}(productsPageNumber=${productListPageHelper.getCurrentPageNumber() + 1})}"
                        th:if="${(productListPageHelper.getCurrentPageNumber() + 1) < productListPageHelper.getTotalPagesAmount()}"
                        class="page-link"> > </a></li>

                <li class="page-item"><a
                        th:href="@{${#httpServletRequest.requestURI}(productsPageNumber=${productListPageHelper.getTotalPagesAmount() - 1})}"
                        class="page-link"> >> </a></li>
            </ul>
        </div>
    </div>


</body>
</html>
